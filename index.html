<!DOCTYPE html>
<html>
<head>
    <title>Medication Reconcile Form</title>
    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
</head>
<body>
    <h1>กรุณารอสักครู่...</h1>
    <script>
        function initializeLiff() {
            liff.init({ liffId: "2006423065-68Ya4XN5" }) // เปลี่ยนเป็น LIFF ID ของคุณ
                .then(() => {
                    if (liff.isLoggedIn()) {
                        liff.getProfile().then(profile => {
                            const userId = profile.userId;
                            const displayName = profile.displayName;

                            // สร้าง URL ของ Google Form พร้อมส่งค่า UserID และ DisplayName
                            const googleFormUrl = "https://docs.google.com/forms/d/e/1FAIpQLSe0HGFB5pPREEwqDpf6rDoocJCfic_B8H9MUAqy2F0DXj9SZQ/viewform";
                            const formUrlWithParams = `${googleFormUrl}?usp=pp_url&entry.1309222655=${userId}&entry.1498928995=${displayName}`;

                            // เปลี่ยนเส้นทางไปที่ Google Form พร้อม URL parameters
                            window.location.href = formUrlWithParams;
                        }).catch(error => {
                            console.error("Error getting profile: ", error);
                        });
                    } else {
                        liff.login();
                    }
                })
                .catch(err => console.error("LIFF Initialization Error: ", err));
        }

        initializeLiff();
    </script>
</body>
</html>
